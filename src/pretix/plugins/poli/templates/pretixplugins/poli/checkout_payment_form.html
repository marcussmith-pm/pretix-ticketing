{% load i18n %}
{% load static %}
<div class="payment-provider-form payment-provider-poli">
    <div class="poli-payment-info">
        <p>
            {% blocktrans trimmed %}
            You will be redirected to POLi to complete your payment securely from your bank account.
            {% endblocktrans %}
        </p>
        <p class="small text-muted">
            {% blocktrans trimmed %}
            POLi is a secure online payment option that allows you to pay directly from your bank account.
            No credit card required. Supported by major banks in New Zealand and Australia.
            {% endblocktrans %}
        </p>
        <div class="poli-banks-info">
            <strong>{% trans "Supported banks include:" %}</strong>
            <ul class="small">
                {% blocktrans trimmed %}
                <li>ANZ</li>
                <li>ASB</li>
                <li>BNZ</li>
                <li>Cooperative Bank</li>
                <li>Heartland Bank</li>
                <li>Kiwibank</li>
                <li>TSB</li>
                <li>Westpac</li>
                {% endblocktrans %}
            </ul>
        </div>
    </div>
</div>

<script>
console.log('[POLi DEBUG] Payment form loaded');

// Log when the form is submitted
document.addEventListener('DOMContentLoaded', function() {
    console.log('[POLi DEBUG] DOM ready');

    // Find the continue button
    var continueButtons = document.querySelectorAll('button[type="submit"], .btn-primary');
    console.log('[POLi DEBUG] Found submit buttons:', continueButtons.length);

    continueButtons.forEach(function(button) {
        button.addEventListener('click', function(e) {
            console.log('[POLi DEBUG] Continue button clicked');
            var selectedPayment = document.querySelector('input[name="payment"][value="poli"], input[name="payment"][value="poli_pay"]');
            console.log('[POLi DEBUG] Selected payment method:', selectedPayment ? 'POLi' : 'Not POLi');
            console.log('[POLi DEBUG] Form action:', document.querySelector('form').action);
        });
    });

    // Log payment method selection changes
    var paymentInputs = document.querySelectorAll('input[name="payment"]');
    paymentInputs.forEach(function(input) {
        input.addEventListener('change', function() {
            console.log('[POLi DEBUG] Payment method changed to:', this.value);
        });
    });
});
</script>
